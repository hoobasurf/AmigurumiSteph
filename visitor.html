<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>Mes crÃ©ations</title>

<style>
/* ================= RESET ================= */
*{box-sizing:border-box;margin:0;padding:0}
html,body{height:100%;font-family:'Comic Sans MS',cursive}

/* ================= BODY / FOND ================= */
body{
  background:url('Photoroom_20251212_143703.png') center/cover no-repeat fixed;
  background-color:#fff0f5;
  display:flex;
  flex-direction:column;
  min-height:100vh;
  overflow:hidden;
}

/* ================= HEADER ================= */
header{
  text-align:center;
  padding:18px 0 8px;
  background:transparent;
}

header img{
  width:90px;
  height:90px;
  margin-bottom:8px;
}

h1{
  font-size:38px;
  color:#b84c6f;
  font-weight:bold;
}

/* ================= VIEW BUTTONS ================= */
#viewSelector{
  display:flex;
  justify-content:center;
  gap:12px;
  margin:10px 0;
}

#viewSelector button{
  padding:8px 18px;
  border-radius:30px;
  border:2px solid #b84c6f;
  background:#ffeaf2;
  color:#b84c6f;
  cursor:pointer;
}

#viewSelector button.active{
  background:#b84c6f;
  color:#fff;
}

/* ================= ZONE CENTRALE ================= */
.center-zone{
  flex:1;
  display:flex;
  align-items:center;
  justify-content:center;
}

/* ================= VISITOR LIST ================= */
#visitor-list{
  width:100%;
  max-width:1200px;
}

/* ================= ITEMS ================= */
.visitor-item{
  text-align:center;
  cursor:pointer;
}

.visitor-item img{
  display:block;
  object-fit:contain;
  border:4px solid #b67385;
  transition:transform .3s, box-shadow .3s;
}

.visitor-item:hover img{
  transform:scale(1.05);
  box-shadow:0 10px 25px rgba(184,76,111,.35);
}

.visitor-item p{
  margin-top:10px;
  font-size:18px;
  color:#b84c6f;
  font-weight:bold;
}

/* ================= CAROUSEL ================= */
.carousel-view{
  display:flex;
  gap:40px;
  overflow-x:auto;
  padding:20px;
  align-items:center;
}

.carousel-view .visitor-item img{
  width:260px;
  height:260px;
}

/* ================= GRID ================= */
.grid-view{
  display:grid;
  grid-template-columns:repeat(auto-fill,minmax(220px,1fr));
  gap:24px;
  padding:20px;
  overflow-y:auto;
  max-height:100%;
}

.grid-view img{
  width:100%;
  height:200px;
}

/* ================= LIST ================= */
.list-view{
  display:flex;
  flex-direction:column;
  gap:18px;
  padding:20px;
  overflow-y:auto;
}

.list-view .visitor-item{
  display:flex;
  gap:18px;
  align-items:center;
}

.list-view img{
  width:130px;
  height:130px;
}

/* ================= MODAL ================= */
.modal-bg{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.65);
  display:none;
  justify-content:center;
  align-items:center;
  z-index:1000;
}

.modal-box{
  background:#fff0f7;
  padding:18px;
  border-radius:18px;
  max-width:900px;
  width:92%;
  max-height:90vh;
  overflow-y:auto;
  position:relative;
}

.close-modal{
  position:absolute;
  top:10px;
  right:14px;
  font-size:26px;
  cursor:pointer;
  color:#b84c6f;
}

.modal-main-img{
  width:100%;
  max-height:420px;
  object-fit:contain;
  border:4px solid #b67385;
}

/* ================= ICON BAR ================= */
.icon-bar{
  display:flex;
  justify-content:center;
  gap:28px;
  margin-top:12px;
  align-items:center;
}

.icon-btn{
  cursor:pointer;
  color:#b84c6f;
  font-size:18px;
  display:flex;
  gap:6px;
  align-items:center;
}

.heart{font-size:26px}
.heart.liked{color:#ff4b82}

.bubble{
  background:#b84c6f;
  color:white;
  border-radius:14px;
  padding:2px 8px;
  font-size:14px;
}

/* ================= COMMENTS ================= */
.comment{
  background:#ffeaf2;
  padding:8px;
  border-radius:10px;
  margin:8px 0;
}

.add-comment-btn{
  margin-top:12px;
  padding:10px 18px;
  border:none;
  border-radius:30px;
  background:#b84c6f;
  color:#fff;
  cursor:pointer;
}
</style>
</head>

<body>

<header>
  <img src="favicon.png" alt="logo">
  <h1>Mes crÃ©ations</h1>
</header>

<div id="viewSelector">
  <button id="btnCarousel" class="active">Carrousel</button>
  <button id="btnGrid">Grille</button>
  <button id="btnList">Liste</button>
</div>

<div class="center-zone">
  <div id="visitor-list" class="carousel-view"></div>
</div>

<!-- MODAL -->
<div class="modal-bg" id="modal">
  <div class="modal-box">
    <div class="close-modal" onclick="closeModal()">Ã—</div>
    <img id="modalMain" class="modal-main-img">

    <div class="icon-bar">
      <div class="icon-btn" onclick="toggleLike()">
        <span id="heart" class="heart">â™¡</span>
        <span id="likeBubble" class="bubble">0</span>
      </div>
      <div class="icon-btn">
        ðŸ’¬ <span id="commentBubble" class="bubble">0</span>
      </div>
    </div>

    <button class="add-comment-btn" onclick="addComment()">Ajouter un commentaire</button>
    <div id="comments"></div>
  </div>
</div>

<script>
const list=document.getElementById("visitor-list");
const modal=document.getElementById("modal");
const modalMain=document.getElementById("modalMain");
const heart=document.getElementById("heart");
const likeBubble=document.getElementById("likeBubble");
const commentBubble=document.getElementById("commentBubble");
const commentsBox=document.getElementById("comments");

let creations=JSON.parse(localStorage.getItem("creations")||"[]");
let currentIndex=null;
let view="carousel";

function render(){
  list.className=view+"-view";
  list.innerHTML="";
  creations.forEach((c,i)=>{
    const d=document.createElement("div");
    d.className="visitor-item";
    d.innerHTML=`<img src="${c.imgUrl}"><p>${c.name}</p>`;
    d.onclick=()=>openModal(i);
    list.appendChild(d);
  });
}

function setView(v){
  view=v;
  document.querySelectorAll("#viewSelector button").forEach(b=>b.classList.remove("active"));
  document.getElementById("btn"+v.charAt(0).toUpperCase()+v.slice(1)).classList.add("active");
  render();
}

btnCarousel.onclick=()=>setView("carousel");
btnGrid.onclick=()=>setView("grid");
btnList.onclick=()=>setView("list");

function openModal(i){
  currentIndex=i;
  modalMain.src=creations[i].imgUrl;
  loadLikes();
  loadComments();
  modal.style.display="flex";
}

function closeModal(){modal.style.display="none"}

function toggleLike(){
  const key="likes_"+currentIndex;
  let likes=JSON.parse(localStorage.getItem(key)||"[]");
  if(likes.includes("user")) likes=[];
  else likes=["user"];
  localStorage.setItem(key,JSON.stringify(likes));
  loadLikes();
}

function loadLikes(){
  const likes=JSON.parse(localStorage.getItem("likes_"+currentIndex)||"[]");
  heart.classList.toggle("liked",likes.length>0);
  heart.textContent=likes.length>0?"â¤ï¸":"â™¡";
  likeBubble.textContent=likes.length;
}

function addComment(){
  const txt=prompt("Ton commentaire");
  if(!txt) return;
  const key="comments_"+currentIndex;
  let c=JSON.parse(localStorage.getItem(key)||"[]");
  c.push(txt);
  localStorage.setItem(key,JSON.stringify(c));
  loadComments();
}

function loadComments(){
  const c=JSON.parse(localStorage.getItem("comments_"+currentIndex)||"[]");
  commentBubble.textContent=c.length;
  commentsBox.innerHTML=c.map(t=>`<div class="comment">${t}</div>`).join("");
}

render();
</script>
</body>
</html>
