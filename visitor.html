<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>Mes crÃ©ations</title>

<style>
*{box-sizing:border-box;margin:0;padding:0}
html,body{height:100%;font-family:'Comic Sans MS',cursive}

body{
  background:url('Photoroom_20251212_143703.png') center/contain no-repeat fixed;
  background-color:#fff0f5;
  display:flex;
  flex-direction:column;
  min-height:100vh;
  overflow:hidden;
  touch-action:pan-x;
}

/* HEADER */
header{text-align:center;padding:20px 0}
header img{width:90px;border-radius:20%}
.title{font-size:42px;color:#b84c6f;font-weight:bold}

/* VIEW BUTTONS */
#viewSelector{
  display:flex;
  justify-content:center;
  gap:12px;
  margin:10px 0;
}
#viewSelector button{
  border:2px solid #b84c6f;
  background:#fff0f7;
  color:#b84c6f;
  padding:8px 18px;
  border-radius:24px;
  cursor:pointer;
}
#viewSelector button.active{
  background:#ffeaf2;
  transform:translateY(-2px);
}

/* CENTER ZONE */
.center-zone{
  flex:1;
  display:flex;
  justify-content:center;
  align-items:center;
}

/* LIST */
#visitor-list{width:100%;max-width:1200px}

/* ITEM */
.visitor-item{text-align:center;cursor:pointer}
.visitor-item img{
  width:260px;
  height:260px;
  object-fit:contain;
  border:3px solid #b67385;
  background:transparent;
  transition:transform .3s,box-shadow .3s;
}
.visitor-item:hover img{
  transform:scale(1.03);
  box-shadow:0 8px 20px rgba(184,76,111,.35);
}
.visitor-item p{
  margin-top:10px;
  font-size:18px;
  color:#b84c6f;
  font-weight:bold;
}

/* CAROUSEL */
.carousel-view{
  display:flex;
  gap:40px;
  overflow-x:auto;
  scroll-behavior:smooth;
  padding:20px;
}
.carousel-view::-webkit-scrollbar{height:8px}
.carousel-view::-webkit-scrollbar-thumb{
  background:#b84c6f66;
  border-radius:20px;
}

/* GRID */
.grid-view{
  display:grid;
  grid-template-columns:repeat(auto-fill,minmax(220px,1fr));
  gap:24px;
  padding:20px;
  max-height:calc(100vh - 260px);
  overflow-y:auto;
}

/* LIST VIEW */
.list-view{
  display:flex;
  flex-direction:column;
  gap:18px;
  padding:20px;
  max-height:calc(100vh - 260px);
  overflow-y:auto;
}
.list-view .visitor-item{
  display:flex;
  gap:20px;
  align-items:center;
}
.list-view img{width:140px;height:140px}

/* MODAL */
.modal-bg{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.65);
  display:none;
  justify-content:center;
  align-items:center;
  z-index:1000;
}
.modal-box{
  background:#fff5f8;
  border-radius:16px;
  padding:18px;
  width:94%;
  max-width:900px;
  max-height:90vh;
  overflow-y:auto;
  position:relative;
}
.close-modal{
  position:absolute;
  top:10px;
  right:14px;
  font-size:28px;
  cursor:pointer;
  color:#b84c6f;
}
.modal-main-img{
  width:100%;
  max-height:420px;
  object-fit:contain;
  border:3px solid #b67385;
}

/* ICON BAR */
.icon-bar{
  display:flex;
  justify-content:center;
  gap:30px;
  margin:14px 0;
}
.icon-btn{
  display:flex;
  align-items:center;
  gap:6px;
  cursor:pointer;
  color:#b84c6f;
  font-size:18px;
}
.heart{font-size:26px}
.heart.liked{color:#ff4b82}
.badge{
  background:#b84c6f;
  color:#fff;
  border-radius:12px;
  padding:2px 8px;
  font-size:13px;
}

/* COMMENTS */
.comment{background:#fff0f7;border-radius:10px;padding:8px;margin-bottom:8px}
.add-comment-btn{
  background:#b84c6f;
  color:#fff;
  border:none;
  border-radius:24px;
  padding:10px 20px;
  cursor:pointer;
}

/* COMMENT FORM */
.comment-form-bg{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.6);
  display:none;
  justify-content:center;
  align-items:center;
  z-index:2000;
}
.comment-form{
  background:#fff;
  padding:16px;
  border-radius:12px;
  width:320px;
}
.comment-form input,
.comment-form textarea{
  width:100%;
  margin-bottom:8px;
  padding:8px;
}
</style>
</head>

<body>

<header>
  <img src="favicon.png">
  <div class="title">Mes crÃ©ations</div>
</header>

<div id="viewSelector">
  <button id="btnCarousel">Carrousel</button>
  <button id="btnGrid">Grille</button>
  <button id="btnList">Liste</button>
</div>

<div class="center-zone">
  <div id="visitor-list"></div>
</div>

<!-- MODAL -->
<div class="modal-bg" id="modal">
  <div class="modal-box">
    <div class="close-modal" onclick="closeModal()">Ã—</div>
    <img id="modalMain" class="modal-main-img">

    <div class="icon-bar">
      <div class="icon-btn" onclick="toggleLike()">
        <span id="heart" class="heart">â™¡</span>
        <span id="likeCount" class="badge">0</span>
      </div>
      <div class="icon-btn" onclick="scrollToComments()">
        ðŸ’¬ <span id="commentCount" class="badge">0</span>
      </div>
    </div>

    <button class="add-comment-btn" onclick="openCommentForm()">Ajouter un commentaire</button>
    <div id="commentsList"></div>
  </div>
</div>

<!-- COMMENT FORM -->
<div class="comment-form-bg" id="commentFormBg">
  <div class="comment-form">
    <input id="commentName" placeholder="PrÃ©nom">
    <textarea id="commentText" placeholder="Commentaire"></textarea>
    <button onclick="submitComment()">Envoyer</button>
  </div>
</div>

<script>
const list=document.getElementById('visitor-list');
const modal=document.getElementById('modal');
const modalMain=document.getElementById('modalMain');
const heart=document.getElementById('heart');
const likeCount=document.getElementById('likeCount');
const commentCount=document.getElementById('commentCount');
const commentsList=document.getElementById('commentsList');
const commentFormBg=document.getElementById('commentFormBg');

let creations=JSON.parse(localStorage.getItem('creations')||'[]');
let currentIndex=null;
let currentView='carousel';

function render(){
  list.innerHTML='';
  list.className=currentView+'-view';
  creations.forEach((c,i)=>{
    const d=document.createElement('div');
    d.className='visitor-item';
    d.innerHTML=`<img src="${c.imgUrl}"><p>${c.name}</p>`;
    d.onclick=()=>openModal(i);
    list.appendChild(d);
  });
}
function setView(v){
  currentView=v;
  document.querySelectorAll('#viewSelector button').forEach(b=>b.classList.remove('active'));
  document.getElementById('btn'+v.charAt(0).toUpperCase()+v.slice(1)).classList.add('active');
  render();
}

btnCarousel.onclick=()=>setView('carousel');
btnGrid.onclick=()=>setView('grid');
btnList.onclick=()=>setView('list');
setView('carousel');

function openModal(i){
  currentIndex=i;
  modalMain.src=creations[i].imgUrl;
  loadLikes();
  loadComments();
  modal.style.display='flex';
}
function closeModal(){modal.style.display='none'}

function toggleLike(){
  const name=prompt('Ton prÃ©nom')||'Anonyme';
  const k='likes_'+currentIndex;
  let l=JSON.parse(localStorage.getItem(k)||'[]');
  l.includes(name)?l=l.filter(n=>n!==name):l.push(name);
  localStorage.setItem(k,JSON.stringify(l));
  loadLikes();
}
function loadLikes(){
  const l=JSON.parse(localStorage.getItem('likes_'+currentIndex)||'[]');
  heart.classList.toggle('liked',l.length>0);
  heart.textContent=l.length?'â¤ï¸':'â™¡';
  likeCount.textContent=l.length;
}

function loadComments(){
  const c=JSON.parse(localStorage.getItem('comments_'+currentIndex)||'[]');
  commentCount.textContent=c.length;
  commentsList.innerHTML=c.map(x=>`<div class="comment"><b>${x.name}</b><br>${x.text}</div>`).join('');
}
function openCommentForm(){commentFormBg.style.display='flex'}
function submitComment(){
  const n=document.getElementById('commentName').value;
  const t=document.getElementById('commentText').value;
  if(!n||!t)return;
  const k='comments_'+currentIndex;
  const c=JSON.parse(localStorage.getItem(k)||'[]');
  c.push({name:n,text:t});
  localStorage.setItem(k,JSON.stringify(c));
  commentFormBg.style.display='none';
  loadComments();
}
function scrollToComments(){commentsList.scrollIntoView({behavior:'smooth'})}
</script>

</body>
</html>
