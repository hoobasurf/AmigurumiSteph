<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>Visitor Gallery</title>
<style>
*{box-sizing:border-box;margin:0;padding:0}
html,body{height:100%;font-family:'Comic Sans MS',cursive;}
body{background:url('Photoroom_20251212_143703.PNG') center top / cover no-repeat fixed;display:flex;flex-direction:column;overflow:auto;}
.center-zone{flex:1;display:flex;justify-content:center;align-items:flex-start;overflow:auto;}
#visitor-list{display:flex;gap:16px;padding:12px;}
.visitor-item{text-align:center;}
.visitor-item img{width:220px;height:220px;object-fit:contain;border:4px solid #b67385;background:#ffe6f0;}
.visitor-item p{margin-top:8px;font-size:20px;color:#b84c6f;font-weight:bold;}
</style>
</head>
<body>

<div class="center-zone">
  <div id="visitor-list"></div>
</div>

<script type="module">
import { createClient } from 'https://cdn.jsdelivr.net/npm/@supabase/supabase-js/+esm'

// ⚡ Remplace par ton projet et ta clé publishable
const supabase = createClient(
  "https://TON_PROJECT_URL.supabase.co",
  "sb_publishable_xxx"
);

const list = document.getElementById('visitor-list');

async function loadCreations() {
  const { data, error } = await supabase.from('creations').select('*').order('created_at',{ ascending:false });
  if(error){ alert(error.message); return; }

  data.forEach(c=>{
    const imgUrl = supabase.storage.from('creations').getPublicUrl(c.image_path).data.publicUrl;
    const div = document.createElement('div');
    div.className = 'visitor-item';
    div.innerHTML = `<img src="${imgUrl}" alt="${c.name}"><p>${c.name}</p>`;
    list.appendChild(div);
  });
}

loadCreations();
</script>
</body>
</html>
