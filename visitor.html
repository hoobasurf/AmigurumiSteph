<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Galerie Projets – Visitor</title>
<style>
  body {
    margin:0;
    font-family:sans-serif;
    background:#fff0f5;
    overflow-x:hidden;
  }

  /* ================= INTRO VIDEO + FOND ================= */
  #intro-container{
    position:fixed;
    inset:0;
    display:flex;
    justify-content:center;
    align-items:center;
    z-index:100000;
    background: url('Photoroom_20251213_123235.png') center center / cover no-repeat;
    flex-direction: column;
  }

  #intro-video {
    width: 600px;
    max-width:90%;
    border-radius:16px;
    pointer-events:none; /* empêche clic sur la vidéo */
    display:block;
    margin-bottom: 20px;
  }

  #welcome-btn {
    padding:14px 28px;
    background:#ffb6c1;
    color:#8b3a3a;
    font-weight:bold;
    font-size:18px;
    border:none;
    border-radius:12px;
    cursor:pointer;
    box-shadow:0 4px 12px rgba(0,0,0,0.2);
  }
  #welcome-btn:hover {
    background:#ff9fc1;
  }

  #intro-container.fade-out {
    opacity:0;
    transition: opacity 1.2s;
    pointer-events:none;
  }

  /* ================= GALERIE ================= */
  h1 {
    text-align:center;
    color:#b84c6f;
    margin-top:20px;
  }

  #visitor-list {
    display:flex;
    flex-wrap:wrap;
    justify-content:center;
    gap:15px;
    margin:20px;
  }

  .visitor-item {
    width:140px;
    text-align:center;
  }

  .visitor-item img {
    width:140px;
    height:140px;
    object-fit:cover;
    border-radius:10px;
  }

  .visitor-item p {
    margin:5px 0 0;
    color:#8b3a3a;
    font-weight:bold;
  }
</style>
</head>

<body>

<!-- INTRO VIDEO + BOUTON -->
<div id="intro-container">
  <video id="intro-video" playsinline webkit-playsinline preload="auto">
    <source src="chat.webm" type="video/webm">
  </video>
  <button id="welcome-btn">Bienvenue</button>
</div>

<h1>✨ Projets réalisés</h1>
<div id="visitor-list"></div>

<script type="module" src="visitor.js"></script>

<script>
  // Gestion du bouton Bienvenue et disparition de la vidéo
  const introContainer = document.getElementById('intro-container');
  const video = document.getElementById('intro-video');
  const welcomeBtn = document.getElementById('welcome-btn');

  welcomeBtn.onclick = () => {
    video.play().catch(e => console.log("Autoplay bloqué :", e));
    welcomeBtn.style.display = 'none';

    // À la fin de la vidéo, fade-out 2 secondes
    video.onended = () => {
      setTimeout(()=>{
        introContainer.classList.add('fade-out');
        setTimeout(()=>introContainer.remove(), 1200);
      }, 2000);
    };
  };

  // Récupération des créations depuis localStorage
  const list = document.getElementById("visitor-list");
  const creations = JSON.parse(localStorage.getItem("creations") || "[]");

  function renderVisitor() {
    list.innerHTML = "";
    creations.forEach(item => {
      const div = document.createElement("div");
      div.className = "visitor-item";
      div.innerHTML = `
        <img src="${item.imgUrl}">
        <p>${item.name}</p>
      `;
      list.appendChild(div);
    });
  }

  renderVisitor();
</script>

</body>
</html>
