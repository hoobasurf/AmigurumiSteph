<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Galerie – Visiteur</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <h1>Mes Petites Créations</h1>

  <div id="gallery" class="gallery-scroll"></div>

  <!-- Modal image -->
  <div id="modal" class="modal hidden">
    <div class="modal-content">
      <img id="modal-img" class="modal-image">
      <button id="close-modal">✖</button>
    </div>
  </div>

  <!-- Firebase SDK via CDN -->
  <script src="https://www.gstatic.com/firebasejs/12.6.0/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/12.6.0/firebase-firestore.js"></script>
  <script src="https://www.gstatic.com/firebasejs/12.6.0/firebase-storage.js"></script>

  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyAKUqhiGi1ZHIfZRwslMIUip8ohwOiLhFA",
      authDomain: "amigurumisteph.firebaseapp.com",
      projectId: "amigurumisteph",
      storageBucket: "amigurumisteph.appspot.com",
      messagingSenderId: "175290001202",
      appId: "1:175290001202:web:b53e4255e699d65bd4192b"
    };
    firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();

    const gallery = document.getElementById("gallery");
    const modal = document.getElementById("modal");
    const modalImg = document.getElementById("modal-img");
    const closeModal = document.getElementById("close-modal");

    closeModal.onclick = () => modal.classList.add("hidden");

    db.collection("creations").orderBy("createdAt", "desc")
      .onSnapshot(snapshot => {
        gallery.innerHTML = "";
        snapshot.docs.forEach(docu => {
          const data = docu.data();
          const img = document.createElement("img");
          img.src = data.imageUrl;
          img.alt = data.name;
          img.onclick = () => {
            modalImg.src = data.imageUrl;
            modal.classList.remove("hidden");
          };
          gallery.appendChild(img);
        });
      });
  </script>
</body>
</html>
