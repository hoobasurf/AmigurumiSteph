<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
*{box-sizing:border-box;margin:0;padding:0}
html,body{height:100%;font-family:'Comic Sans MS',cursive}

body{
  background:#f0f0f0;
  display:flex;
  flex-direction:column;
  align-items:center;
}

/* LISTE */
#visitor-list{
  display:flex;
  gap:18px;
  padding:20px;
  overflow-x:auto;
}

.visitor-item{
  position:relative;
  text-align:center;
}
.visitor-item img{
  width:160px;
  height:160px;
  object-fit:cover;
  border:2px solid #b67385;
  border-radius:16px;
  cursor:pointer;
}
.visitor-item p{
  margin-top:8px;
  font-weight:bold;
  color:#b84c6f;
}

/* CROIX */
.delete-btn{
  position:absolute;
  top:4px;
  right:4px;
  width:24px;
  height:24px;
  background:red;
  color:white;
  border-radius:50%;
  display:flex;
  justify-content:center;
  align-items:center;
  cursor:pointer;
  font-weight:bold;
}

/* MODALE AJOUT */
.modal-bg{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,0.5);
  display:none;
  justify-content:center;
  align-items:center;
}
.modal-box{
  background:white;
  padding:20px;
  border-radius:16px;
}
</style>
</head>
<body>

<button id="addBtn">Ajouter une image</button>

<div id="visitor-list"></div>

<div class="modal-bg" id="addModal">
  <div class="modal-box">
    <button onclick="closeAdd()">×</button>
    <h3>Ajouter photo</h3>
    <input type="text" id="name" placeholder="Nom"><br><br>
    <input type="file" id="multiPhoto" multiple accept="image/*"><br><br>
    <button id="confirmBtn">Valider</button>
  </div>
</div>

<script>
let creations = [];

const visitorList = document.getElementById('visitor-list');
const addModal = document.getElementById('addModal');
const addBtn = document.getElementById('addBtn');
const confirmBtn = document.getElementById('confirmBtn');

addBtn.onclick = () => addModal.style.display='flex';
addModal.onclick = e => { if(e.target===addModal) closeAdd(); }

function closeAdd(){ addModal.style.display='none'; }

function render(){
  visitorList.innerHTML = '';
  creations.forEach((c, idx) => {
    const div = document.createElement('div');
    div.className = 'visitor-item';
    div.innerHTML = `<div class="delete-btn">×</div>
                     <p>${c.name}</p>
                     <img src="${c.src}">`;

    // supprimer
    div.querySelector('.delete-btn').onclick = (e)=>{
      e.stopPropagation();
      if(confirm("Supprimer cette image ?")){
        creations.splice(idx,1);
        render();
      }
    };

    visitorList.appendChild(div);
  });
}

confirmBtn.onclick = () => {
  const name = document.getElementById('name').value.trim();
  const files = document.getElementById('multiPhoto').files;
  if(!name || !files.length) return alert("Nom + photo obligatoire");

  for(let f of files){
    const reader = new FileReader();
    reader.onload = e => {
      creations.push({name:name, src:e.target.result});
      render();
    }
    reader.readAsDataURL(f);
  }
  closeAdd();
}
</script>
</body>
</html>
