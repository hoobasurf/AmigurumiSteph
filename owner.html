<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
*{box-sizing:border-box;margin:0;padding:0;}
html,body{height:100%;font-family:'Comic Sans MS',cursive;}

/* FOND FIXE */
body::before {
  content:"";
  position:fixed;
  top:0; left:0;
  width:100vw; height:100vh;
  background:url('Photoroom_20251223_114401.jpeg') center/cover no-repeat;
  z-index:-1;
}

/* CENTRAGE GRILLE */
.center-zone {
  display:flex;
  justify-content:center;
  align-items:flex-start;
  padding:calc(20px + 5cm) 0 20px 0; /* descente totale 5cm */
}

/* SCROLL HORIZONTAL */
#visitor-list-container{
  display:flex;
  overflow-x:auto;
  scroll-snap-type:x mandatory;
  -webkit-overflow-scrolling:touch;
}

/* PAGE 2x3 */
.page{
  display:grid;
  grid-template-columns: repeat(2,1fr);
  grid-template-rows: repeat(3,1fr);
  column-gap:3mm;
  row-gap:4mm;
  flex:0 0 auto;
  width: calc(2*200px + 3mm);
  height: calc(3*200px + 8mm);
  scroll-snap-align:center;
  justify-content:center;
  padding:4mm;
}

/* CARD VISITOR */
.visitor-item{
  position:relative;
  width:200px;height:200px;
  border-radius:12px;
  overflow:hidden;
  border:3px solid #fff;
  box-shadow:0 6px 14px rgba(0,0,0,0.25), inset 0 0 0 1px rgba(255,255,255,0.4);
  background:#ffe6f0;
}
.visitor-item img{
  width:100%; height:100%;
  object-fit:cover;
  border-radius:12px;
  cursor:pointer;
}
.visitor-item p{
  position:absolute;
  bottom:2px;width:100%;
  font-size:14px;color:#b84c6f;
  text-align:center;font-weight:bold;
  text-shadow:1px 1px 2px rgba(255,255,255,0.8);
  z-index:2;
}

/* CROIX SUPPRESSION */
.delete-btn{
  position:absolute; top:4px; right:4px;
  width:22px;height:22px;
  background:rgba(255,182,193,0.7);
  color:#fff;border-radius:50%;
  display:flex;align-items:center;justify-content:center;
  font-weight:bold;font-size:14px;
  border:1px solid #fff;
  cursor:pointer;
  z-index:10;
}
.delete-btn:hover{background:#ffb6c1;}

/* MODAL BASE */
.modal{
  position:fixed; inset:0;
  background:rgba(0,0,0,0.5);
  display:none;
  justify-content:center;
  align-items:center;
  z-index:10000;
}
.modal .modal-box{
  background:#ffe6f0;
  border:3px solid #b67385;
  border-radius:20px;
  padding:16px 24px;
  display:flex;
  flex-direction:column;
  gap:12px;
  min-width:250px;
}

/* MODAL INPUT */
.modal input, .modal textarea{
  padding:6px 12px;
  border-radius:10px;
  border:2px solid #b67385;
  width:100%;
}

/* MODAL BUTTON */
.modal button{
  padding:6px 12px;
  border:none;
  background:#ffb6c1;
  color:#fff;
  border-radius:12px;
  cursor:pointer;
  font-weight:bold;
}

/* ZOOM */
#zoomModal img{
  max-width:80%;
  max-height:60vh;
  border:4px solid #b67385;
  border-radius:20px;
  margin-bottom:10px;
}
#zoomModal .thumbs{
  display:flex;
  gap:8px;
  max-width:80%;
  overflow-x:auto;
}
#zoomModal .thumbs img{
  width:50px; height:50px;
  object-fit:cover;
  border-radius:12px;
  border:2px solid #b67385;
  cursor:pointer;
}

/* LIKE/COMMENT AREA */
.actions{
  display:flex;
  gap:12px;
  margin-top:8px;
  align-items:center;
}
.actions .like, .actions .comment{
  display:flex;
  align-items:center;
  gap:4px;
  cursor:pointer;
  color:#b84c6f;
  font-weight:bold;
}
.actions svg{
  width:20px; height:20px;
  fill:none;
  stroke:#ffb6c1;
  stroke-width:2px;
}

/* LISTE LIKE / COMMENT */
.list-box{
  display:flex;
  gap:12px;
  margin-top:6px;
}
.list-box .like-list, .list-box .comment-list{
  background:rgba(255,230,240,0.5);
  border:1px solid #b67385;
  border-radius:12px;
  padding:6px;
  flex:1;
  max-height:120px;
  overflow-y:auto;
  font-size:13px;
}

/* RESPONSIVE */
@media(max-width:480px){
  .page{grid-template-columns:repeat(2,120px); grid-template-rows:repeat(3,120px);}
  .visitor-item{width:120px;height:120px;}
}
</style>
</head>
<body>

<div class="center-zone">
  <div id="visitor-list-container"></div>
</div>

<!-- MODALS -->
<div id="deleteModal" class="modal">
  <div class="modal-box">
    <p id="deleteText">Supprimer ce projet ?</p>
    <button id="confirmDelete">Valider</button>
    <button onclick="closeModal('deleteModal')">Annuler</button>
  </div>
</div>

<div id="likeModal" class="modal">
  <div class="modal-box">
    <p>Ajouter votre prénom pour le Like :</p>
    <input id="likeName" placeholder="Prénom">
    <button id="confirmLike">Valider</button>
    <button onclick="closeModal('likeModal')">Annuler</button>
  </div>
</div>

<div id="commentModal" class="modal">
  <div class="modal-box">
    <p>Ajouter votre commentaire :</p>
    <input id="commentName" placeholder="Prénom">
    <textarea id="commentText" placeholder="Commentaire"></textarea>
    <button id="confirmComment">Valider</button>
    <button onclick="closeModal('commentModal')">Annuler</button>
  </div>
</div>

<!-- ZOOM -->
<div id="zoomModal" class="modal">
  <div class="modal-box" style="align-items:center;">
    <div class="closeZoom" style="position:absolute;top:8px;right:8px;cursor:pointer;font-size:20px;color:#fff;" onclick="closeModal('zoomModal')">×</div>
    <img id="mainZoom">
    <div class="thumbs" id="thumbs"></div>
    <div class="actions">
      <div class="like" onclick="openLikeModal()">
        <svg viewBox="0 0 24 24"><path d="M12 21C12 21 4 13 4 8c0-2.5 2-4.5 4.5-4.5C10 3.5 12 5 12 5s2-1.5 3.5-1.5C18 3.5 20 5.5 20 8c0 5-8 13-8 13z"/></svg>
        <span id="likeCount">0</span>
      </div>
      <div class="comment" onclick="openCommentModal()">
        <svg viewBox="0 0 24 24"><path d="M4 4h16v12H5.17L4 17.17V4z"/></svg>
        <span id="commentCount">0</span>
      </div>
    </div>
    <div class="list-box">
      <div class="like-list" id="likeList"></div>
      <div class="comment-list" id="commentList"></div>
    </div>
  </div>
</div>

<script>
// données test
const creations = [
  {name:"Projet A", imgUrl:"https://picsum.photos/200/200?random=1", zoomGroup:[], likes:[], comments:[]},
  {name:"Projet B", imgUrl:"https://picsum.photos/200/200?random=2", zoomGroup:[], likes:[], comments:[]},
  {name:"Projet C", imgUrl:"https://picsum.photos/200/200?random=3", zoomGroup:[], likes:[], comments:[]},
  {name:"Projet D", imgUrl:"https://picsum.photos/200/200?random=4", zoomGroup:[], likes:[], comments:[]},
  {name:"Projet E", imgUrl:"https://picsum.photos/200/200?random=5", zoomGroup:[], likes:[], comments:[]},
  {name:"Projet F", imgUrl:"https://picsum.photos/200/200?random=6", zoomGroup:[], likes:[], comments:[]},
];

const container = document.getElementById('visitor-list-container');

let currentProject = null;
function render(){
  container.innerHTML='';
  let page = null;
  creations.forEach((c,i)=>{
    if(i%6===0){
      page = document.createElement('div');
      page.className='page';
      container.appendChild(page);
    }
    const d = document.createElement('div');
    d.className='visitor-item';
    d.innerHTML=`
      <div class="delete-btn">×</div>
      <p>${c.name}</p>
      <img src="${c.imgUrl}">
    `;
    page.appendChild(d);

    d.querySelector('img').onclick = ()=>{
      openZoom(c);
    }
    d.querySelector('.delete-btn').onclick = ()=>{
      currentProject = c;
      openModal('deleteModal');
    }
  });
}
render();

function openModal(id){ document.getElementById(id).style.display='flex'; }
function closeModal(id){ document.getElementById(id).style.display='none'; }

// DELETE
document.getElementById('confirmDelete').onclick = ()=>{
  creations.splice(creations.indexOf(currentProject),1);
  render();
  closeModal('deleteModal');
}

// ZOOM
const mainZoom = document.getElementById('mainZoom');
const thumbs = document.getElementById('thumbs');
const likeCount = document.getElementById('likeCount');
const commentCount = document.getElementById('commentCount');
const likeList = document.getElementById('likeList');
const commentList = document.getElementById('commentList');

function openZoom(c){
  currentProject = c;
  mainZoom.src = c.imgUrl;
  thumbs.innerHTML = '';
  c.zoomGroup.forEach(u=>{
    const t = document.createElement('img');
    t.src=u;
    t.onclick = ()=> mainZoom.src=u;
    thumbs.appendChild(t);
  });
  updateLists();
  openModal('zoomModal');
}

function updateLists(){
  likeCount.textContent = currentProject.likes.length;
  commentCount.textContent = currentProject.comments.length;
  likeList.innerHTML = currentProject.likes.join('<br>') || '';
  commentList.innerHTML = currentProject.comments.map(c=>`${c.name}: ${c.text}`).join('<br>') || '';
}

// LIKE
function openLikeModal(){
  document.getElementById('likeName').value='';
  openModal('likeModal');
}
document.getElementById('confirmLike').onclick = ()=>{
  const name = document.getElementById('likeName').value.trim();
  if(name){ currentProject.likes.push(name); updateLists(); closeModal('likeModal'); }
}

// COMMENT
function openCommentModal(){
  document.getElementById('commentName').value='';
  document.getElementById('commentText').value='';
  openModal('commentModal');
}
document.getElementById('confirmComment').onclick = ()=>{
  const name = document.getElementById('commentName').value.trim();
  const text = document.getElementById('commentText').value.trim();
  if(name && text){ currentProject.comments.push({name,text}); updateLists(); closeModal('commentModal'); }
}
</script>
</body>
</html>
