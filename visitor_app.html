<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>Visitor - Mes créations</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
*{margin:0;padding:0;box-sizing:border-box;}
html,body{width:100%;height:100%;overflow:auto;font-family:sans-serif;}
body{background:#fff0f5;padding:20px;}

h1{
  text-align:center;
  margin:20px 0;
  color:#b84c6f;
}

/* Container pour les créations */
#visitor-list{
  display:flex;
  flex-wrap:wrap;
  justify-content:center;
  gap:15px;
}

.visitor-item{
  text-align:center;
  cursor:pointer;
}

.visitor-item img{
  width:200px;
  height:200px;
  object-fit:cover;
  border-radius:12px;
  transition: transform 0.2s ease, box-shadow 0.2s ease;
}

.visitor-item img:hover{
  transform:scale(1.03);
  box-shadow:0 8px 20px rgba(184,76,111,0.3);
}

.visitor-item p{
  margin-top:8px;
  font-size:16px;
  color:#b84c6f;
}
</style>
</head>
<body>

<h1>✨ Projets réalisés</h1>
<div id="visitor-list"></div>

<script type="module">
import { createClient } from 'https://cdn.jsdelivr.net/npm/@supabase/supabase-js/+esm';

const SUPABASE_URL = "https://iubbxvipgofxasatmvzg.supabase.co";
const SUPABASE_ANON_KEY = "sb_publishable_GDoZmwIdoP28XOdrfYYVNw_E_HiCQB1";
const supabase = createClient(SUPABASE_URL, SUPABASE_ANON_KEY);

const listContainer = document.getElementById('visitor-list');
let creations = [];

// Charger les créations depuis bucket "owners"
async function loadCreations() {
  try {
    const { data, error } = await supabase.storage.from('owners').list();
    if(error) throw error;

    creations = data.map(item => ({
      name: item.name,
      imgUrl: supabase.storage.from('owners').getPublicUrl(item.name).publicURL
    }));

    renderCreations();
  } catch(e) {
    console.error(e);
  }
}

function renderCreations(){
  listContainer.innerHTML = '';
  creations.forEach((item,i)=>{
    const div = document.createElement('div');
    div.className = 'visitor-item';
    div.innerHTML = `<img src="${item.imgUrl}" alt="${item.name}"><p>${item.name}</p>`;
    listContainer.appendChild(div);
  });
}

loadCreations();
</script>

</body>
</html>
